{
  "hash": "d188c75e41fee42ad1eb33e2b14ec342",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Lab 3\nsubtitle: Everything So Far\ncategories: Lab\ndescription: \"Due Sun Jun 1 11:59 PM\"\ndraft: false\n---\n\n# Introduction\n\nIn this lab, you'll review topics you've worked with in previous labs and practice new topics we have learned since the last lab.\n\n::: {callout-note}\nThis lab assumes you've completed [Lab 1](/lab/lab-1.html) and [Lab 2](/lab/lab-2.html) and doesn't repeat setup and overview content from those labs.\nIf you haven't done those yet, you should review them before starting with this one.\nThe same ideas apply.\n:::\n\n# Code Guidelines\n\nAs we've discussed in the lecture, your plots should include an **informative title, axes and legends should have human-readable labels and aesthetic choices should be carefully considered**.\n\n::: {callout-important}\nTitles that run off the page are NOT human readable.\nLong titles can be split into mutliple lines by adding \"\\n\" into the string.\n:::\n\nAdditionally, code should follow the tidyverse style.\nParticularly,\n\n-   there should be spaces before and line breaks after each + when building a ggplot,\n\n-   there should also be spaces before and line breaks after each \\|\\> in a data transformation pipeline,\n\n-   code should be properly indented,\n\n-   there should be spaces around = signs and spaces after commas\n\n-   use `|>` instead of `%>%`\n\n-   when saving a data frame, use `<-` instead of `=`\n\nFurthermore, all code should be visible in the PDF output, i.e., should not run off the page on the PDF.\nLong lines that run off the page should be split across multiple lines with line breaks.1\n\nAs you complete the lab and other assignments in this course, remember to develop a sound workflow for reproducible data analysis.\nThis assignment will periodically remind you to render, commit, and push your changes to GitHub.\n\n## Getting started\n\nLog in to RStudio, clone your `lab-3` repo from GitHub, open your `lab-3.qmd` document, and get started!\n\n::: {.callout-tip collapse=\"true\"}\n## Click here if you want to see step-by-step instructions\n\n### Step 1: Log in to RStudio\n\n-   Go to <https://cmgr.oit.duke.edu/containers> and log in with your Duke NetID and Password.\n-   Click `STA198-199` under My reservations to log into your container. You should now see the RStudio environment.\n\n### Step 2: Clone the repo & start a new RStudio project\n\n-   Go to the course organization at [github.com/sta199-su25](https://github.com/sta199-su25) organization on GitHub.\n    Click on the repo with the prefix **lab-3**.\n    It contains the starter documents you need to complete the lab.\n\n-   Click on the green **CODE** button and select **Use SSH**. This might already be selected by default; if it is, you'll see the text **Clone with SSH**.\n    Click on the clipboard icon to copy the repo URL.\n\n-   In RStudio, go to *File* ➛ *New Project* ➛*Version Control* ➛ *Git*.\n\n-   Copy and paste the URL of your assignment repo into the dialog box *Repository URL*. Again, please make sure to have *SSH* highlighted under *Clone* when you copy the address.\n\n-   Click *Create Project*, and the files from your GitHub repo will be displayed in the *Files* pane in RStudio.\n\n-   Click *lab-3.qmd* to open the template Quarto file.\n    This is where you will write up your code and narrative for the lab.\n\n### Step 3: Update the YAML\n\nIn `lab-3.qmd`, update the `author` field to your name, render your document and examine the changes.\nThen, in the Git pane, click on **Diff** to view your changes, add a commit message (e.g., \"Added author name\"), and click **Commit**.\nThen, push the changes to your GitHub repository, and in your browser confirm that these changes have indeed propagated to your repository.\n:::\n\n::: callout-important\nIf you run into any issues with the first steps outlined above, flag someone for help before proceeding.\n:::\n\n## Packages\n\nIn this lab, we will work with the\n\n-   **tidyverse** package for doing data analysis in a \"tidy\" way,\n-   **readxl** package for reading in Excel files,\n-   **janitor** package for cleaning up variable names, and\n-   **palmerpenguins** and **datasauRus** packages for some datasets\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(palmerpenguins)\nlibrary(datasauRus)\n```\n:::\n\n\n# Part 1: datasauRus\n\nThe data frame you will be working with in this part is called `datasaurus_dozen` and it's in the **datasauRus** package.\nThis single data frame contains 13 datasets, designed to show us why data visualization is important and how summary statistics alone can be misleading.\nThe different datasets are marked by the `dataset` variable, as shown in @fig-datasaurus.\n\n![The \\`datasaurus_dozen\\` data frame stacks 13 datasets on top of each other. This figure shows the first three datasets.](images/lab-4/datasaurus-dozen.png){#fig-datasaurus fig-align=\"center\" width=\"432\"}\n\n::: callout-note\nIf it's confusing that the data frame is called `datasaurus_dozen` when it contains 13 datasets, you're not alone!\nHave you heard of a [baker's dozen](https://www.mentalfloss.com/article/32259/why-bakers-dozen-13)?\n:::\n\nHere is a peek at the dataset:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatasaurus_dozen \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,846 × 3\n   dataset     x     y\n   <chr>   <dbl> <dbl>\n 1 dino     55.4  97.2\n 2 dino     51.5  96.0\n 3 dino     46.2  94.5\n 4 dino     42.8  91.4\n 5 dino     40.8  88.3\n 6 dino     38.7  84.9\n 7 dino     35.6  79.9\n 8 dino     33.1  77.6\n 9 dino     29.0  74.5\n10 dino     26.2  71.4\n# ℹ 1,836 more rows\n```\n\n\n:::\n:::\n\n\n## Question 1\n\na.  In a single pipeline, calculate the mean of `x`, mean of `y`, standard deviation of `x`, standard deviation of `y`, and the correlation between `x` and `y` for each level of the `dataset` variable. Make sure the results are visible for all datasets. Then, in 1-2 sentences, comment on how these summary statistics compare across groups (datasets).\n\n::: callout-note\n-   For a reminder of what **standard deviation** is, refer to May 19th's textbook reading: IMS chapter 5.\n    This concept is fair game for the midterm.\n    Math details are not needed, but you should understand the big picture idea.\n\n-   **Correlation** is a new term.\n    We will learn more details about this after the midterm, but the idea is that it measures the strength and direction of a linear relationship.\n    Values range from -1 (perfect negative linear relationship) to 1 (perfect positive linear relationship).\n    Values near 0 have little/no linear trend.\n    This concept will not be tested on the midterm.\n:::\n\n::: callout-note\nThe `datasauRus` data is stored in a `tibble`: this is a special class of data frame used in the tidyverse. All `tibble`s are `dataframe`s (with some extra features!), but not vice versa. By default, `tibble`s only print out 10 rows (whereas other dataframes print out all rows).\n\nThe result of the summarize should have 13 rows. To display all rows, add `print(n = 13)` as the last step of your pipeline.\n:::\n\nb.  Create a scatterplot of `y` versus `x` and **color** and **facet** it by `dataset`. Then, in 1-2 sentences, briefly discuss how these plots compare across groups (datasets). How does your response in this question compare to your response to the previous question and what does this say about using visualizations and summary statistics when getting to know a dataset?\n\n::: callout-tip\nWhen you both color and facet by the same variable, you'll end up with a redundant legend.\nTurn off the legend by adding `show.legend = FALSE` to the geom creating the legend.\n:::\n\n# Part 2: `mtcars`\n\nIn this part, you'll work with one of the most basic and overused datasets in R: `mtcars`.\nThe data in this dataset come from the 1974 Motor Trend US magazine (so, yes, they're old!) and provide information on fuel efficiency and other car characteristics.\n\n### Question 2\n\nSince this data set is used in many code examples, it's not unexpected that some analyses of the data are good and some not so much.\n\n::: callout-tip\nFor both parts of this question, you should review the data dictionary that is in the documentation for the dataset which you can find at <https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html> or by typing `?mtcars` in your Console.\n:::\n\na\\.\nYou come across the following visualization of these data.\nFirst, determine what is wrong with this visualization and describe it in one sentence.\nThen, fix it and improve the visualization.\nAs part of your improvement, make sure your legend\n\n-   is on top of the plot,\n-   is informative, and\n-   lists **levels** in the order they appear in the plot (that is, the level with more points on the left should be on the left of the legend)\n\n\n### Question 3\n\nYour task is to make your plot from Question 4b as ugly and as ineffective as possible.\nLike, seriously.\nI want something that is apocalyptically heinous.\nChange colors, axes, fonts, themes, or anything else you can think of.\nYou can search online for other themes, fonts, etc. that you want to tweak.\nThe sky is truly the limit.\nI want Voldemort, Cruella de Vil, and Regina George all nodding in approval at how horrendously evil your plot is.\n\nYou must make at least 5 updates to the plot, and your answer must include:\n\n-   a list of the at least 5 updates you've made to your plot from Question 4b, and\n\n-   1-2 sentence explanation of why the plot you created is *ugly* (to you, at least) and ineffective.\n\n::: callout-tip\nThe tidyverse documentation on [themes](https://ggplot2.tidyverse.org/reference/theme.html) may give you ideas about how you can alter the various features of the plot.\n:::\n\n# Part 3: Olympians\n\nFor this part, you'll work with data from the rosters of Team USA from the 2020 and 2024 Olympics.\nThe data come from <https://www.teamusa.com> and the rosters for the two games are in a single Excel file (`team-usa.xlsx` in your `data` folder), accross two separate spreadsheets within that file.\n@fig-olympics-sheets shows screenshots of these spreadsheets.\n\n::: {#fig-olympics-sheets layout-ncol=\"2\"}\n![Team USA 2020](images/lab-4/team-usa-2020.png)\n\n![Team USA 2024](images/lab-4/team-usa-2024.png)\n\nExcel file with two sheets for rosters of Team USA 2020 and 2024.\n:::\n\nYour goal is to answer questions about athletes who competed in both games and only one of the games.\n\n## Question 4\n\nRead in and save the data from the Excel document as two separate data frames: `team_usa_2020` and `team_usa_2024`.\nThen, display the first 5 rows of each.\n\n::: callout-tip\nNote that the data is stored in two sheets in the same Excel document.\nThe `read_excel` function has a `sheet` argument that allows you to specify which sheet you want to read from.\n:::\n\n\n## Question 5\n\na.  Now, we want to clean up the column names of the data (for instance, remove spaces to make them easier to deal with).\n    Check out the documentation for the `clean_names()`function from the janitor package at <https://sfirke.github.io/janitor/reference/clean_names.html>.\\\n\n    \\\n    Use this function (with default settingts) to \"clean\" the variable names of `team_usa_2020` and `team_usa_2024`, saving the data frames with the new variable names into the original data frame names.\\\n\nb.  **In each** data set, **save** a new variable that:\n\n    -   `paste()`s together the first_name and last_name variables with a space in between and\n\n    -   is the first column of the data frame (hint: check out `relocate()` ).\n\n## Question 6\n\na.  Using an appropriate \\`\\*\\_join()\\` function, determine how many athletes participated in both Olympic Games. Make sure to show the result of the join in a way that makes the resulting number clear (for instance, the number of rows in the joined data frame) AND state the result in a sentence.\n\n\n::: callout-important\nYour answer to this question, based on the data frames you created, should be 0, even if it doesn't make sense in context of actual Olympic athletes.\nWe will investigate this in further parts.\n:::\n\nb.  If you have even a passing knowledge of the Olympic Games, you might know that there are some athletes that participated in both the 2020 and 2024 games, e.g., Simone Biles, Katie Ledecky, etc.\\\n\n    \\\n    The reason why athlete names didn't match across the two data frames is that in one data frame, names are in UPPER CASE, and in the other, they're in Title Case.\n    Update the 2020 data frame to make \\`name\\` all upper case.\n    Display the first 10 rows of \\`team_usa_2020\\` with upper case names.\n\n\n::: callout-important\nYour answer must use the `str_to_upper()` function.\n:::\n\nb.  Let's try that question again: How many athletes participated in both Olympic Games?\n\n\nc.  How many athletes participated in the 2020 Olympic Games but not the 2024 Olympic Games? How many athletes participated in the 2024 Olympic Games but not the 2020 Olympic Games? Use appropriate joins to arrive at these answers. Make sure to show the result of the join in a way that makes the resulting numbers clear AND state them in a sentence.\n\n\n\n## Question 7\n\nNow, let's focus on the 2024 Olympic data in your `team_usa_2024` data frame.\n\na.  States of interest: Choose 2-5 states of interest and save them in a vector called `states_of_interest`.\n    For example, if I chose California, Louisiana, and North Carolina, this would be:\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    states_of_interest <- c(\"Alabama\", \"Louisiana\", \"North Carolina\")\n    ```\n    :::\n\n\n    Then, filter the `team_usa_2024` result to only include Olympians from these states, saving the results as `team_usa_2024_soi` .\n\n\nb.  In a single pipeline, use `team_usa_2024_soi` to determine how many Olympians from these states went to the 2024 Olympics, saving the results in data frame `state_counts`.\n    Then, in a separate pipeline, display the results in increasing order of number of Olympians.\n\nc.  Below are two different approaches to creating a bar chart representing the same information as in part (b).\\\n    \\\n    The first uses `geom_bar()`, as we have seen before. The second uses an alternative function for creating bar charts: `geom_col()`.\\\n    \\\n    **Run both** blocks of code. **Discuss** what is different between the two pieces of code and the difference between what `geom_bar` and `geom_col` need to produce the same plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# geom_bar:\nteam_usa_2024_soi |> ggplot(aes(x = hometown_state)) + \n  geom_bar()\n\n\n# geom_col:\nstate_counts |> ggplot(aes(x = hometown_state, y = n)) + \n  geom_col()\n```\n:::\n\n\nd.  Create a visualization that compares the proportions of male/female Olympians across your states of interest. In 1-2 sentences, briefly discuss the results. Do any of them surprise you?\n",
    "supporting": [
      "lab-3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}