{
  "hash": "7a3a6db36f8a4c1bd3f822016d9b89b8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Midterm + More Practice!\"\nsubtitle: \"Lecture 10\"\ndate: \"2025-05-29\"\nformat: \n  revealjs:\n    output-file: 10-practice-slides.html\nauto-stretch: false\n---\n\n\n\n## Announcements\n\n-   I will not hold office hours on Tuesday, June 3rd: this is when you have your take home!\n-   Replacement midterm review office hours: June 2nd (3:30 - 5:30)\n-   Be in class and lab on Monday!!!!\n-   Tomorrow: Review game!\n\n## Midterm Exam 1 {.smaller}\n\nWorth 20% of your final grade; consists of two parts:\n\n-   **In-class**: worth 70% of the Midterm 1 grade;\n\n-   **Take-home**: worth 30% of the Midterm 1 grade.\n\n## Material {.smaller}\n\nEverything we have done so far:\n\n-   plotting data with `ggplot` and interpreting plots\n-   computing and understanding summary statistics\n-   transforming data (row/column/grouping operations)\n-   pivoting & joining data\n-   data types/classes\n-   importing data\n-   *Monday's class*: *data science ethics*\n\n## In-class\n\n::: incremental\n-   All multiple choice\n\n-   You get both sides of one 8.5\" x 11\" note sheet that you and only you created (written, typed, iPad, etc)\n:::\n\n. . .\n\n::: callout-important\nIf you have testing accommodations, make sure I get proper documentation from SDAO and make appointments in the Testing Center ASAP. The appointment should overlap substantially with our class time if possible.\n:::\n\n## What should I put on my cheat sheet? {.smaller}\n\n::: incremental\n-   description of common functions;\n-   examples of function usage;\n-   description of different visualizations: how to interpret, and what to use when;\n-   doodles;\n-   cute words of affirmation.\n:::\n\n. . .\n\n::: callout-warning\nDon't waste space on the details of any specific applications or datasets we've seen (penguins, Bechdel, gerrymandering, midwest, etc).\nAnything we want you to know about a particular application will be introduced from scratch within the exam.\n:::\n\n## Example in-class question\n\nWhich command can replace a pre-existing column in a data frame with a new and improved version of itself?\n\na.  `group_by`\nb.  `summarize`\nc.  `pivot_wider`\nd.  `geom_replace`\ne.  `mutate`\n\n## Example in-class question {.smaller}\n\n\n::: {.cell}\n\n:::\n\n\n::: columns\n::: {.column width=\"40%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 2\n      x y    \n  <dbl> <chr>\n1     1 Marie\n2     2 Marie\n3     3 Katie\n4     4 Mary \n5     5 Mary \n6     6 Mary \n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |>\n  group_by(y) |>\n  summarize(xbar = mean(x))\n```\n:::\n\n\nHow many rows will this output have?\n\na.  1\nb.  2\nc.  3\nd.  6\ne.  11\n:::\n:::\n\n## Example in-class question {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\nWhich box plot is visualizing the same data as the histogram?\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Example in-class question {.smaller}\n\nWhat code could have been used to produce `df_result`?\nSelect all that apply.\n\n::: columns\n::: {.column width=\"25%\"}\n`df_X`\n\n| state | year |\n|-------|------|\n| LA    | 2025 |\n| NC    | 2025 |\n| LA    | 2024 |\n:::\n\n::: {.column width=\"25%\"}\n`df_Y`\n\n| state | region |\n|-------|--------|\n| LA    | south  |\n| NC    | south  |\n| CA    | west   |\n:::\n\n::: {.column width=\"50%\"}\n`df_result`\n\n| state | year | region |\n|-------|------|--------|\n| LA    | 2025 | south  |\n| NC    | 2025 | south  |\n| LA    | 2024 | south  |\n:::\n:::\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\na.  `left_join(df_X, df_Y)`\\\nb.  `right_join(df_X, df_Y)`\\\nc.  `full_join(df_X, df_Y)`\\\n:::\n\n::: {.column width=\"50%\"}\nd.  `anti_join(df_Y, df_X)`\\\ne.  `right_join(df_Y, df_X)`\\\n:::\n:::\n\n## Take-home\n\n::: incremental\n-   It will be just like a lab, but shorter;\n-   Completely open-resource, but citation policies apply;\n-   Absolutely no collaboration of any kind;\n-   Seek help by posting *privately* on Ed;\n-   Submit your final PDF to Gradescope in the usual way.\n:::\n\n## Reminder: conduct policies\n\n::: incremental\n-   Uncited use of outside resources or inappropriate collaboration will result in a zero and be referred to the conduct office;\n-   If a conduct violation of any kind is discovered, your final letter grade in the course will be permanently reduced (A- down to B+, B+ down to B, etc);\n-   If folks share solutions, all students involved will be penalized equally, the sharer the same as the recipient.\n:::\n\n## Things you can do to study\n\n::: incremental\n-   **Practice problems**: released Thursday February 13;\n-   **Attend class tomorrow**: review game\n-   **Old labs**: correct parts where you lost points;\n-   **Old AEs**: complete tasks we didn't get to and compare with key;\n-   **Code along**: watch these videos specifically;\n-   **Textbook**: odd-numbered exercises in the back of IMS Chs. 1, 4, 5, 6\n:::\n\n# Let's Practice!\n\n## Today's Goals:\n\n-   **Goal 1:** Practice data ***transformation*** and working with ***characters*** - sales data from yesterday\n-   **Goal 2:** ✨Beautify✨ the plot from AE-08: plotting + ***factors***\n-   **Goal 3:** Practice ***pivoting*** with AE-08 data\n\n\n## Goal 1: Transform Sales Data {.smaller}\nYesterday: read an Excel file with non-tidy data\n\n![](images/09/sales-excel.png)\n\n## Goal 1: Transform Sales Data {.smaller}\nYesterday: read an Excel file with non-tidy data\n\n![](images/09/sales-excel.png)\n\n## Goal 1: Transform Sales Data {.smaller}\n\nGoal: tidy up the data\n\n::: columns\n::: {.column width=\"50%\"}\n![](https://sta199-s24.github.io/images/sales-1.png){width=\"300\"}\n:::\n\n::: {.column width=\"50%\"}\n![](https://sta199-s24.github.io/images/sales-2.png){width=\"300\"}\n:::\n:::\n\n## String Functions {.smaller}\n\n::: columns\n::: {.column width=\"70%\"}\nWe've seen lots of functions that deal with numeric data (`mean`, `median`, `sum`, etc.) - what about characters?\n\n-   **stringr** is a **tidyverse** package with lots of functions for dealing with character strings\n\n-   today: **str_detect** in **stringr**\n:::\n\n::: {.column width=\"30%\"}\n![](images/stringr.png){width=\"185\"}\n:::\n:::\n\n## String Functions {.smaller}\n\n-   **str_detect()** identifies if some characters are a substring of a larger string\n\n-   useful in cases when you need to check some condition, for example:\n\n    -   in a `filter()`\n\n    -   in an `if_else()` or `case_when()`\n\n## String Functions {.smaller}\n\n-   **str_detect()** identifies if some characters are a substring of a larger string\n\n-   useful in cases when you need to check some condition, for example:\n\n    -   in a `filter()`\n\n    -   in an `if_else()` or `case_when()`\n\n**example:** which classes in a list are in the stats department?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclasses <- c(\"sta199\", \"dance122\", \"math185\", \"sta240\", \"pubpol202\")\nstr_detect(classes, \"sta\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE  TRUE FALSE\n```\n\n\n:::\n:::\n\n\n## String Functions {.smaller}\n\nGeneral form:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr_detect(character_var, \"word_to_detect\")\n```\n:::\n\n\n## Let's get started! {.smaller}\nOpen up yesterday's AE file (AE-09).\n\n## Let's get started! {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw <- read_excel(\n  \"data/sales.xlsx\", \n  skip = 3,\n  col_names = c(\"id\", \"n\")\n  )\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 2\n  id      n    \n  <chr>   <chr>\n1 Brand 1 n    \n2 1234    8    \n3 8721    2    \n4 1822    3    \n5 Brand 2 n    \n6 3333    1    \n7 2156    3    \n8 3987    6    \n9 3216    5    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Create Brand Column {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw \n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 2\n  id      n    \n  <chr>   <chr>\n1 Brand 1 n    \n2 1234    8    \n3 8721    2    \n4 1822    3    \n5 Brand 2 n    \n6 3333    1    \n7 2156    3    \n8 3987    6    \n9 3216    5    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Create Brand Column {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw |>\n  mutate(\n    is_brand_name = str_detect(id, \"Brand\")\n  )\n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 3\n  id      n     is_brand_name\n  <chr>   <chr> <lgl>        \n1 Brand 1 n     TRUE         \n2 1234    8     FALSE        \n3 8721    2     FALSE        \n4 1822    3     FALSE        \n5 Brand 2 n     TRUE         \n6 3333    1     FALSE        \n7 2156    3     FALSE        \n8 3987    6     FALSE        \n9 3216    5     FALSE        \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Create Brand Column {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw |>\n  mutate(\n    is_brand_name = str_detect(id, \"Brand\"),\n    brand = if_else(is_brand_name, id, NA)\n  )\n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 4\n  id      n     is_brand_name brand  \n  <chr>   <chr> <lgl>         <chr>  \n1 Brand 1 n     TRUE          Brand 1\n2 1234    8     FALSE         <NA>   \n3 8721    2     FALSE         <NA>   \n4 1822    3     FALSE         <NA>   \n5 Brand 2 n     TRUE          Brand 2\n6 3333    1     FALSE         <NA>   \n7 2156    3     FALSE         <NA>   \n8 3987    6     FALSE         <NA>   \n9 3216    5     FALSE         <NA>   \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Create Brand Column {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw |>\n  mutate(\n    is_brand_name = str_detect(id, \"Brand\"),\n    brand = if_else(is_brand_name, id, NA)\n  )|>\n  fill(brand)\n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 4\n  id      n     is_brand_name brand  \n  <chr>   <chr> <lgl>         <chr>  \n1 Brand 1 n     TRUE          Brand 1\n2 1234    8     FALSE         Brand 1\n3 8721    2     FALSE         Brand 1\n4 1822    3     FALSE         Brand 1\n5 Brand 2 n     TRUE          Brand 2\n6 3333    1     FALSE         Brand 2\n7 2156    3     FALSE         Brand 2\n8 3987    6     FALSE         Brand 2\n9 3216    5     FALSE         Brand 2\n```\n\n\n:::\n:::\n\n:::\n:::\n\n\n## Keep Needed Rows {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw |>\n  mutate(\n    is_brand_name = str_detect(id, \"Brand\"),\n    brand = if_else(is_brand_name, id, NA)\n  )|>\n  fill(brand)|>\n  filter(!is_brand_name)\n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 4\n  id    n     is_brand_name brand  \n  <chr> <chr> <lgl>         <chr>  \n1 1234  8     FALSE         Brand 1\n2 8721  2     FALSE         Brand 1\n3 1822  3     FALSE         Brand 1\n4 3333  1     FALSE         Brand 2\n5 2156  3     FALSE         Brand 2\n6 3987  6     FALSE         Brand 2\n7 3216  5     FALSE         Brand 2\n```\n\n\n:::\n:::\n\n:::\n:::\n\n\n## Keep Needed Columns {.smaller}\n\n::: columns\n::: {.column width=\"57%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nsales_raw |>\n  mutate(\n    is_brand_name = str_detect(id, \"Brand\"),\n    brand = if_else(is_brand_name, id, NA)\n  )|>\n  fill(brand)|>\n  filter(!is_brand_name)|>\n  select(brand, id, n)\n```\n:::\n\n\n:::\n\n::: {.column width=\"43%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 3\n  brand   id    n    \n  <chr>   <chr> <chr>\n1 Brand 1 1234  8    \n2 Brand 1 8721  2    \n3 Brand 1 1822  3    \n4 Brand 2 3333  1    \n5 Brand 2 2156  3    \n6 Brand 2 3987  6    \n7 Brand 2 3216  5    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n\n## Goal 2: Beautify AE-08 Plot {.smaller}\n\nData:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndurham_climate \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 × 4\n   month     avg_high_f avg_low_f precip\n   <chr>          <dbl>     <dbl>  <dbl>\n 1 January           49        28   4.45\n 2 February          53        29   3.7 \n 3 March             62        37   4.69\n 4 April             71        46   3.43\n 5 May               79        56   4.61\n 6 June              85        65   4.02\n 7 July              89        70   3.94\n 8 August            87        68   4.37\n 9 September         81        60   4.37\n10 October           71        47   3.7 \n11 November          62        37   3.39\n12 December          53        30   3.43\n```\n\n\n:::\n:::\n\n\n## Goal 2: Beautify AE-08 Plot {.smaller}\n\nOriginal Plot:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-24-1.png){width=960}\n:::\n:::\n\n\n## Goal 2: Beautify AE-08 Plot {.smaller}\n\nReleveling Months:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-25-1.png){width=960}\n:::\n:::\n\n\n## Goal 2: Beautify AE-08 Plot {.smaller}\n\nGoal:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-26-1.png){width=960}\n:::\n:::\n\n\n## Goal: Beautify AE-08 Plot {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-27-1.png){width=960}\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-28-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 × 4\n   month     avg_high_f avg_low_f precip\n   <fct>          <dbl>     <dbl>  <dbl>\n 1 January           49        28   4.45\n 2 February          53        29   3.7 \n 3 March             62        37   4.69\n 4 April             71        46   3.43\n 5 May               79        56   4.61\n 6 June              85        65   4.02\n 7 July              89        70   3.94\n 8 August            87        68   4.37\n 9 September         81        60   4.37\n10 October           71        47   3.7 \n11 November          62        37   3.39\n12 December          53        30   3.43\n```\n\n\n:::\n:::\n\n:::\n:::\n\n## The Code... {.smaller}\n\nTake a look at the printout!What does each highlighted portion do?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n## The Code... {.smaller}\n\nGo ahead and pull today's AE - mess around with the code.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-31-1.png){width=960}\n:::\n:::\n\n## Goal 3: High/Low lines\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-32-1.png){width=960}\n:::\n:::\n\n\n## Goal 3: High/Low lines {.smaller}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10-practice_files/figure-revealjs/unnamed-chunk-33-1.png){width=960}\n:::\n:::\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 5\n  month    avg_high_f avg_low_f precip season\n  <fct>         <dbl>     <dbl>  <dbl> <fct> \n1 January          49        28   4.45 Winter\n2 February         53        29   3.7  Winter\n3 March            62        37   4.69 Spring\n```\n\n\n:::\n:::\n\n\n## Pivot!!! {.smaller}\n\n::: columns\n::: {.column width=\"60%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 5\n  month    avg_high_f avg_low_f precip season\n  <fct>         <dbl>     <dbl>  <dbl> <fct> \n1 January          49        28   4.45 Winter\n2 February         53        29   3.7  Winter\n3 March            62        37   4.69 Spring\n4 April            71        46   3.43 Spring\n5 May              79        56   4.61 Spring\n```\n\n\n:::\n:::\n\n\n<br>\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 5\n  month    precip season temp_type   temp\n  <fct>     <dbl> <fct>  <chr>      <dbl>\n1 January    4.45 Winter avg_high_f    49\n2 January    4.45 Winter avg_low_f     28\n3 February   3.7  Winter avg_high_f    53\n4 February   3.7  Winter avg_low_f     29\n5 March      4.69 Spring avg_high_f    62\n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Pivot!!! {.smaller}\n\nAdd your pivot code to today's AE.\nCheck out the plotting code!\nWhat is going on?\n\n\n\n",
    "supporting": [
      "10-practice_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}