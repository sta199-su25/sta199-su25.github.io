{
  "hash": "44f80740f0f059ca16d5cab916c5729d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"More Data Transformation\"\nsubtitle: \"Lecture 5\"\ndate: \"2025-05-19\"\nformat: \n  revealjs:\n    output-file: 05-data-transform-2-slides.html\nauto-stretch: false\n---\n\n## Announcements/Reminders {.smaller}\n\n-   Lab is due TONIGHT at 11:59PM\n\n-   Come to office hours and/or post on Ed for help!\n\n-   Office hours are tonight from **5:30-7:30PM** in **Old Chem 203**.\n\n-   AEs need to be pushed by the **END OF CLASS (10:45AM)!!**\n\n-   Make sure you are in the right repository.\n\n## Lab: Narrative\n\n## Outline {.smaller}\n\n-   ***Last Time:*** Started learning about data transformation!\n\n-   ***Today:***\n\n    -   Review from last time + finish AE04\n\n    -   More about the pipe\n\n    -   Transformation + plotting\n\n\n::: {.cell}\n\n:::\n\n\n## Quick Review: Row operations {.smaller}\n\n::: columns\n::: {.column width=\"70%\"}\n-   `slice()`: chooses rows based on location\\\n-   `filter()`: chooses rows based on column values\\\n-   `arrange()`: changes the order of the rows\\\n-   `sample_n()`: take a random subset of the rows\\\n:::\n\n::: {.column width=\"30%\"}\n| X1  | X2  | X3  |\n|:---:|:---:|:---:|\n|  1  |  a  | yes |\n|  3  |  b  | no  |\n|  5  |  a  | yes |\n|  7  |  b  | yes |\n|  9  |  a  | yes |\n:::\n:::\n\n## Quick Review: Column operations {.smaller}\n\n::: columns\n::: {.column width=\"70%\"}\n-   `select()`: changes whether or not a column is included\\\n-   `rename()`: changes the name of columns\\\n-   `mutate()`: changes the values of columns and creates new columns\\\n:::\n\n::: {.column width=\"30%\"}\n| X1  | X2  | X3  |\n|:---:|:---:|:---:|\n|  1  |  a  | yes |\n|  3  |  b  | no  |\n|  5  |  a  | yes |\n|  7  |  b  | yes |\n|  9  |  a  | yes |\n:::\n:::\n\n## Quick Review: Groups of rows {.smaller}\n\n::: columns\n::: {.column width=\"70%\"}\n-   `summarize()`: collapses a group into a single row\\\n-   `count()`: count unique values of one or more variables\\\n-   `group_by()`: perform calculations separately for each value of a variable\\\n:::\n\n::: {.column width=\"30%\"}\n| X1  | X2  | X3  |\n|:---:|:---:|:---:|\n|  1  |  a  | yes |\n|  3  |  b  | no  |\n|  5  |  a  | yes |\n|  7  |  b  | yes |\n|  9  |  a  | yes |\n:::\n:::\n\n# AE-04\n\n## More about the pipe {.smaller}\n\n-   The pipe operator passes what comes before it into the function that comes after it as the first argument in that function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(1, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n<br>\n\n## More about the pipe {.smaller}\n\n-   The pipe operator passes what comes before it into the function that comes after it as the first argument in that function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(1, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1 |> \n  sum(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n## Pipe + ggplot() !! {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bechdel, aes(x = budget_2013)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](05-data-transform-2_files/figure-revealjs/pipe-plot-1.png){width=960}\n:::\n:::\n\n\n## Pipe + ggplot() !! {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel |>\n  ggplot(aes(x = budget_2013)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](05-data-transform-2_files/figure-revealjs/pipe-plot-2s-1.png){width=960}\n:::\n:::\n\n\n## Why is this useful?\n\n-   We can do data transformation immediately followed by a plot!\n\n-   Normally, even if we are just plotting, we use the pipe with ggplot().\n\n## Plot + data transform\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,615 × 7\n   title          year gross_2013 budget_2013    roi binary clean_test\n   <chr>         <dbl>      <dbl>       <dbl>  <dbl> <chr>  <chr>     \n 1 21 & Over      2013   67878146    13000000  5.22  FAIL   notalk    \n 2 Dredd 3D       2012   55078343    45658735  1.21  PASS   ok        \n 3 12 Years a S…  2013  211714070    20000000 10.6   FAIL   notalk    \n 4 2 Guns         2013  208105475    61000000  3.41  FAIL   notalk    \n 5 42             2013  190040426    40000000  4.75  FAIL   men       \n 6 47 Ronin       2013  184166317   225000000  0.819 FAIL   men       \n 7 A Good Day t…  2013  371598396    92000000  4.04  FAIL   notalk    \n 8 About Time     2013  102648667    12000000  8.55  PASS   ok        \n 9 Admission      2013   36014634    13000000  2.77  PASS   ok        \n10 After Earth    2013  304895295   130000000  2.35  FAIL   notalk    \n# ℹ 1,605 more rows\n```\n\n\n:::\n:::\n\n\n## Plot + data transform\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel |>\n  mutate(budget_in_millions = budget_2013/1000000)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,615 × 8\n   title          year gross_2013 budget_2013    roi binary clean_test\n   <chr>         <dbl>      <dbl>       <dbl>  <dbl> <chr>  <chr>     \n 1 21 & Over      2013   67878146    13000000  5.22  FAIL   notalk    \n 2 Dredd 3D       2012   55078343    45658735  1.21  PASS   ok        \n 3 12 Years a S…  2013  211714070    20000000 10.6   FAIL   notalk    \n 4 2 Guns         2013  208105475    61000000  3.41  FAIL   notalk    \n 5 42             2013  190040426    40000000  4.75  FAIL   men       \n 6 47 Ronin       2013  184166317   225000000  0.819 FAIL   men       \n 7 A Good Day t…  2013  371598396    92000000  4.04  FAIL   notalk    \n 8 About Time     2013  102648667    12000000  8.55  PASS   ok        \n 9 Admission      2013   36014634    13000000  2.77  PASS   ok        \n10 After Earth    2013  304895295   130000000  2.35  FAIL   notalk    \n# ℹ 1,605 more rows\n# ℹ 1 more variable: budget_in_millions <dbl>\n```\n\n\n:::\n:::\n\n\n## Plot + data transform\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel |>\n  mutate(budget_in_millions = budget_2013/1000000) |>\n  ggplot(aes(x = budget_in_millions))\n```\n\n::: {.cell-output-display}\n![](05-data-transform-2_files/figure-revealjs/pipe-plot-5-1.png){width=960}\n:::\n:::\n\n\n## Recap: assignment {.smaller}\n\nLet's make a tiny data frame to use as an example:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ndf <- tibble(x = c(1, 2, 3, 4, 5), y = c(\"a\", \"a\", \"b\", \"c\", \"c\"))\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     1 a    \n2     2 a    \n3     3 b    \n4     4 c    \n5     5 c    \n```\n\n\n:::\n:::\n\n\n## Recap: assignment {.smaller}\n\n::: columns\n::: {.column .fragment width=\"50%\"}\n> **Do something and show me**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf |>\n  mutate(x = x * 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     2 a    \n2     4 a    \n3     6 b    \n4     8 c    \n5    10 c    \n```\n\n\n:::\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     1 a    \n2     2 a    \n3     3 b    \n4     4 c    \n5     5 c    \n```\n\n\n:::\n:::\n\n:::\n\n::: {.column .fragment width=\"50%\"}\n> **Do something and save result**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df |>\n  mutate(x = x * 2)\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     2 a    \n2     4 a    \n3     6 b    \n4     8 c    \n5    10 c    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Recap: assignment {.smaller}\n\n::: columns\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, overwriting original**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-7\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf <- df |>\n  mutate(x = x * 2)\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     2 a    \n2     4 a    \n3     6 b    \n4     8 c    \n5    10 c    \n```\n\n\n:::\n:::\n\n:::\n\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, _not_ overwriting original**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-7\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf_new <- df |>\n  mutate(x = x * 2)\ndf_new\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     2 a    \n2     4 a    \n3     6 b    \n4     8 c    \n5    10 c    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Recap: assignment {.smaller}\n\n::: columns\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, overwriting original _when you shouldn't_**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-8\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf <- df |>\n  group_by(y) |>\n  summarize(mean_x = mean(x))\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n  y     mean_x\n  <chr>  <dbl>\n1 a        1.5\n2 b        3  \n3 c        4.5\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, _not_ overwriting original _when you shouldn't_**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-8\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf_summary <- df |>\n  group_by(y) |>\n  summarize(mean_x = mean(x))\ndf_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n  y     mean_x\n  <chr>  <dbl>\n1 a        1.5\n2 b        3  \n3 c        4.5\n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Recap: assignment {.smaller}\n\n::: columns\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, overwriting original**\\\n> **_data frame_**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-7\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf <- df |>\n  mutate(z = x + 2)\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 3\n      x y         z\n  <dbl> <chr> <dbl>\n1     1 a         3\n2     2 a         4\n3     3 b         5\n4     4 c         6\n5     5 c         7\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column .fragment width=\"50%\"}\n> **Do something, save result, overwriting original**\\\n> **_column_**\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-7\"}\ndf <- tibble(\n  x = c(1, 2, 3, 4, 5), \n  y = c(\"a\", \"a\", \"b\", \"c\", \"c\")\n)\ndf <- df |>\n  mutate(x = x + 2)\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n      x y    \n  <dbl> <chr>\n1     3 a    \n2     4 a    \n3     5 b    \n4     6 c    \n5     7 c    \n```\n\n\n:::\n:::\n\n:::\n:::\n\n",
    "supporting": [
      "05-data-transform-2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}